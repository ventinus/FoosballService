"use strict";
const core_1 = require("@aws-cdk/core");
const lib_1 = require("../lib");
module.exports = {
    'SynthUtils.synthesize() is always executed against the root of the tree'(test) {
        // GIVEN
        const root = new core_1.App();
        const stack1 = new core_1.Stack(root, 'stack1');
        const stack2 = new core_1.Stack(root, 'stack2');
        stack2.addDependency(stack1);
        // THEN
        // this would have failed if we didn't synthesize at the root because 'stack1' would not be emitted
        lib_1.SynthUtils.synthesize(stack2);
        test.done();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC5zeW50aC11dGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlc3Quc3ludGgtdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHdDQUEyQztBQUUzQyxnQ0FBb0M7QUFFcEMsaUJBQVM7SUFDUCx5RUFBeUUsQ0FBQyxJQUFVO1FBQ2xGLFFBQVE7UUFDUixNQUFNLElBQUksR0FBRyxJQUFJLFVBQUcsRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sTUFBTSxHQUFHLElBQUksWUFBSyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN6QyxNQUFNLE1BQU0sR0FBRyxJQUFJLFlBQUssQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDekMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU3QixPQUFPO1FBQ1AsbUdBQW1HO1FBQ25HLGdCQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNkLENBQUM7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBTdGFjayB9IGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0IHsgVGVzdCB9IGZyb20gJ25vZGV1bml0JztcbmltcG9ydCB7IFN5bnRoVXRpbHMgfSBmcm9tICcuLi9saWInO1xuXG5leHBvcnQgPSB7XG4gICdTeW50aFV0aWxzLnN5bnRoZXNpemUoKSBpcyBhbHdheXMgZXhlY3V0ZWQgYWdhaW5zdCB0aGUgcm9vdCBvZiB0aGUgdHJlZScodGVzdDogVGVzdCkge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3Qgcm9vdCA9IG5ldyBBcHAoKTtcbiAgICBjb25zdCBzdGFjazEgPSBuZXcgU3RhY2socm9vdCwgJ3N0YWNrMScpO1xuICAgIGNvbnN0IHN0YWNrMiA9IG5ldyBTdGFjayhyb290LCAnc3RhY2syJyk7XG4gICAgc3RhY2syLmFkZERlcGVuZGVuY3koc3RhY2sxKTtcblxuICAgIC8vIFRIRU5cbiAgICAvLyB0aGlzIHdvdWxkIGhhdmUgZmFpbGVkIGlmIHdlIGRpZG4ndCBzeW50aGVzaXplIGF0IHRoZSByb290IGJlY2F1c2UgJ3N0YWNrMScgd291bGQgbm90IGJlIGVtaXR0ZWRcbiAgICBTeW50aFV0aWxzLnN5bnRoZXNpemUoc3RhY2syKTtcbiAgICB0ZXN0LmRvbmUoKTtcbiAgfVxufTsiXX0=